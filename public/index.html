<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sendify - Ultimate P2P Communication Platform</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.js"></script>
</head>
<body data-color-scheme="dark">
    <!-- Homepage Screen -->
    <div class="screen" id="homeScreen">
        <div class="home-container">
            <!-- Animated Background -->
            <div class="animated-background">
                <div class="gradient-orb orb-1"></div>
                <div class="gradient-orb orb-2"></div>
                <div class="gradient-orb orb-3"></div>
                <div class="gradient-orb orb-4"></div>
            </div>

            <!-- Main Content -->
            <div class="home-content">
                <!-- Logo Section -->
                <div class="logo-section">
                    <div class="gradient-logo">
                        <h1 class="logo-text">Sendify</h1>
                        <div class="logo-tagline">Ultimate P2P Communication</div>
                    </div>
                </div>

                <!-- Connection Panel -->
                <div class="connection-panel">
                    <div class="glass-card">
                        <div class="connection-grid">
                            <div class="left-connection">
                                <div class="connection-section">
                                    <h2>Your Connection Code</h2>
                                    <div class="connection-status" id="connectionStatus">
                                        <div class="status-indicator waiting"></div>
                                        <span>Connecting to Network...</span>
                                    </div>
                                    <div class="code-display">
                                        <div class="code-card">
                                            <div class="code-value" id="connectionCode">CONNECTING</div>
                                        </div>
                                        <button id="copyCode" class="btn btn-gradient" disabled>
                                            Copy Code
                                        </button>
                                    </div>
                                </div>

                                <div class="divider">
                                    <span>OR</span>
                                </div>

                                <div class="connection-section">
                                    <h2>Connect to Peer</h2>
                                    <form id="connectForm" class="connection-form">
                                        <div class="connection-input">
                                            <input 
                                                type="text" 
                                                id="peerCode" 
                                                class="form-control glass-input" 
                                                placeholder="Enter 12-character code"
                                                maxlength="12"
                                                pattern="[A-F0-9]{12}"
                                                title="Please enter a valid 12-character code"
                                                required
                                                disabled
                                            >
                                            <button type="submit" id="connectBtn" class="btn btn-primary-gradient btn--full-width" disabled>
                                                Connect
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            
                            <div class="qr-section">
                                <h2>Scan to Connect</h2>
                                <div class="qr-box">
                                    <div id="qrCode"></div>
                                    <div class="qr-caption">Scan to open with code</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Features Box -->
                    <div class="glass-card" style="margin-top: 1rem;">
                        <div class="feature-badges">
                            <span class="badge">Unlimited File Transfers</span>
                            <span class="badge">Secure & Fast</span>
                            <span class="badge">Direct P2P</span>
                        </div>
                    </div>

                    <!-- Connection Info -->
                    <div class="connection-info">
                        <p>Share your code with anyone to establish a secure, direct connection</p>
                        <div class="server-status">
                            <span id="serverEndpoint">Connecting...</span>
                            <div class="status-dot" id="serverStatus"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Communication Hub Screen -->
    <div class="screen hidden" id="hubScreen">
        <div class="hub-container">
            <!-- Header -->
            <header class="hub-header">
                <div class="header-content">
                    <div class="header-left">
                        <div class="logo-container">
                            <span class="logo-text">Sendify</span>
                        </div>
                        <div class="connection-info">
                            <span class="peer-id" id="connectedPeerId">Connected to: LOADING</span>
                        </div>
                    </div>
                    <div class="header-actions">
                        <button id="disconnectBtn" class="disconnect-btn">
                            <span class="btn-text">Disconnect</span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Main Content -->
            <main class="tab-content">
                <!-- File Transfer Tab -->
                <div class="tab-panel active" id="filesTab">
                    <div class="file-transfer-container">
                        <!-- Expanded File Drop Zone -->
                        <div class="file-drop-container expanded">
                            <div class="file-drop-zone" id="fileDropZone">
                                <div class="drop-zone-content">
                                    <div class="drop-zone-icon">
                                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2ZM18 20H6V4H13V9H18V20ZM8 15.01L9.41 16.42L11 14.84V19H13V14.84L14.59 16.43L16 15.01L12.01 11L8 15.01Z" fill="currentColor"/>
                                        </svg>
                                    </div>
                                    <div class="drop-zone-text">
                                        <h4>Drag & Drop Files Here</h4>
                                        <p>or click to select files</p>
                                    </div>
                                </div>
                                <div class="file-list" id="fileList">
                                    <div class="empty-state">No files selected</div>
                                </div>
                                <input type="file" id="fileInput" multiple style="display: none;">
                            </div>
                            <button class="file-upload-btn" id="selectFilesBtn">
                                <span class="btn-icon">SELECT</span>
                                Choose Files
                            </button>
                        </div>

                        <!-- Right Panel - Transfer Status -->
                        <div class="transfer-status-panel">
                            <div class="transfer-card">
                                <div class="transfer-card__header">
                                    <h4>Transfer Status</h4>
                                </div>
                                <div class="transfer-card__body">
                                    <div class="transfer-details">
                                        <div class="transfer-icon" data-component-name="&lt;div /&gt;">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2.01 21L23 12L2.01 3L2 10L17 12L2 14L2.01 21Z" fill="currentColor" />
  </svg>
</div>
                                        <div class="transfer-info">
                                            <div class="transfer-title" id="transferAction">Ready</div>
                                            <div class="transfer-subtitle" id="transferFileName">No active transfers</div>
                                        </div>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="progressFill"></div>
                                    </div>
                                    <div class="progress-meta">
                                        <span id="progressPercent">0%</span>
                                        <span class="dot">â€¢</span>
                                        <span id="progressFiles">Ready</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Transfer History -->
                            <div class="history-section">
                                <div class="section-header">
                                    <h4>Transfer History</h4>
                                </div>
                                <div class="transfer-history" id="transferHistory">
                                    <div class="empty-state">No transfer history yet</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Notifications -->
    <div class="notification-container" id="notifications"></div>

    <!-- Connection Request Modal -->
    <div class="modal-overlay hidden" id="connectionRequestModal">
        <div class="modal-content">
            <h3 id="connectionRequestText">Incoming Connection Request</h3>
            <p>From code: <span id="connectionRequestCode"></span></p>
            <div class="modal-actions">
                <button id="acceptConnectionBtn" class="btn btn--primary">Accept</button>
                <button id="rejectConnectionBtn" class="btn btn--secondary">Reject</button>
            </div>
        </div>
    </div>
    
    <script src="final-app.js"></script>
</body>
</html>